
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Setting up DL_MESO &#8212; DL_Software Digital Guide (DL_SDG) 2.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom_CY.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lattice Boltzmann Equation" href="LBE.html" />
    <link rel="prev" title="DL_MESO" href="exercises_dlmeso.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="LBE.html" title="Lattice Boltzmann Equation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="exercises_dlmeso.html" title="DL_MESO"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">DL_Software Digital Guide (DL_SDG) 2.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../Resources.html" >Resources</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="Exercises.html" >DL_Software Tutorial Exercises</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="exercises_dlmeso.html" accesskey="U">DL_MESO</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Setting up DL_MESO</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="setting-up-dl-meso">
<span id="dlmeso-setup"></span><h1>Setting up DL_MESO<a class="headerlink" href="#setting-up-dl-meso" title="Permalink to this headline">¶</a></h1>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Before carrying out the practical exercises, you will need to prepare your computer by installing some packages (e.g. compilers, visualisation tools), download and compile DL_MESO <a class="reference internal" href="#seaton2013" id="id1"><span>[Seaton2013]</span></a>. The following presumes you are an academic researcher and can therefore register for an Academic Licence for DL_MESO. (If this is not the case, please get in touch with <a class="reference external" href="mailto:michael&#46;seaton&#37;&#52;&#48;stfc&#46;ac&#46;uk">Michael Seaton</a> to work out options for gaining access.)</p>
</section>
<section id="prerequisites-for-dl-meso">
<h2>Prerequisites for DL_MESO<a class="headerlink" href="#prerequisites-for-dl-meso" title="Permalink to this headline">¶</a></h2>
<p>In order to compile DL_MESO’s codes and associated utilities, you will need at least the following installed on your computer:</p>
<ul class="simple">
<li><p>A Fortran 2003 compiler (e.g. gfortran from the GCC suite)</p></li>
<li><p>A C++ compiler (e.g. g++ from the GCC suite)</p></li>
<li><p>GNU Make (usually already installed in Linux and macOS)</p></li>
</ul>
<p>Optionally, you can include an installed instance of MPI (e.g. Open-MPI) which includes compiler wrappers to use MPI libraries with DL_MESO’s codes to speed up your calculations. An instance of the Java Runtime Environment (JRE) is also needed to use the GUI supplied with DL_MESO.</p>
<p>All of the above can be installed using a Linux package manager - available via Windows Linux Subsystem if you are using Windows 10 - or either MacPorts or HomeBrew on Macs. For instance, if you are using Ubuntu, running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span>
</pre></div>
</div>
<p>in a terminal window should install the GCC suite, although you may also need to install gfortran separately.</p>
</section>
<section id="obtaining-dl-meso">
<h2>Obtaining DL_MESO<a class="headerlink" href="#obtaining-dl-meso" title="Permalink to this headline">¶</a></h2>
<p>You will first need to register and download DL_MESO to obtain its source code. To do this, visit <a class="reference external" href="www.ccp5.ac.uk/DL_MESO">DL_MESO’s website</a>, follow the link to <a class="reference external" href="https://www.scd.stfc.ac.uk/Pages/DL_MESO-register.aspx">Registering for the DL_MESO package</a> and click ‘REGISTER NOW’ to go to DL_MESO’s Registration Form. Once you have completed and submitted the Registration Form, you should receive an automated email with a link to DL_MESO’s source code, a password to decrypt it on unpacking and instructions on how to do so.</p>
</section>
<section id="compiling-dl-meso">
<h2>Compiling DL_MESO<a class="headerlink" href="#compiling-dl-meso" title="Permalink to this headline">¶</a></h2>
<p>There are two major codes to compile (DL_MESO_LBE and DL_MESO_DPD) and a number of utilities.</p>
<p>To compile DL_MESO_LBE with OpenMP multithreading and reasonable optimisation, go into the <em>dl_meso/WORK</em> directory in a terminal window and type one of the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">++</span> <span class="o">-</span><span class="n">O3</span> <span class="o">-</span><span class="n">openmp</span> <span class="o">../</span><span class="n">LBE</span><span class="o">/</span><span class="n">slbe</span><span class="o">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="n">lbe</span><span class="o">.</span><span class="n">exe</span>
<span class="n">mpicxx</span> <span class="o">-</span><span class="n">O3</span> <span class="o">-</span><span class="n">openmp</span> <span class="o">../</span><span class="n">LBE</span><span class="o">/</span><span class="n">plbe</span><span class="o">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="n">lbe</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>substituting <code class="docutils literal notranslate"><span class="pre">c++</span></code> with your C++ compiler (e.g. <code class="docutils literal notranslate"><span class="pre">g++</span></code>), <code class="docutils literal notranslate"><span class="pre">mpicxx</span></code> with the C++ compiler wrapped with MPI <a class="footnote-reference brackets" href="#id5" id="id2">1</a>, and <code class="docutils literal notranslate"><span class="pre">-openmp</span></code> with the compiler flag needed to invoke OpenMP (e.g. <code class="docutils literal notranslate"><span class="pre">-fopenmp</span></code> for g++). The first command compiles the serial (single core) version of DL_MESO_LBE, while the second produces the parallel (multiple core) version. In both cases, the resulting executable will be <em>lbe.exe</em>.</p>
<p>To compile DL_MESO_DPD, you will need to use a makefile to compile several Fortran modules and link them together as an executable. To do this, the <em>dl_meso/DPD/makefiles</em> directory has Makefiles available with and without MPI, with and without OpenMP. Choose the version you wish to compile and copy the required makefile into the <em>dl_meso/WORK</em> directory, renaming it as <em>Makefile</em>. This can then be invoked while in the <em>dl_meso/WORK</em> directory using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>to produce the executable <em>dpd.exe</em>. Note that these makefiles assume you are using <code class="docutils literal notranslate"><span class="pre">gfortran</span></code>: if you want to use a different compiler, open the makefile in a text editor and change the command in the line starting with <code class="docutils literal notranslate"><span class="pre">FC=</span></code>.</p>
<p>To compile the utilities, there is another makefile available in the <em>dl_meso/WORK</em> directory, which can be invoked with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">Makefile</span><span class="o">-</span><span class="n">utils</span>
</pre></div>
</div>
<p>which again assumes use of <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> and <code class="docutils literal notranslate"><span class="pre">g++</span></code> as compilers. (These can be modified in the lines starting with <code class="docutils literal notranslate"><span class="pre">FC=</span></code> and <code class="docutils literal notranslate"><span class="pre">CC=</span></code>.)</p>
<p>Once you have compiled everything, you can delete all the module (<code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">*.mod</span></code>) and object (<code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">*.o</span></code>) files.</p>
</section>
<section id="setting-up-visualisation-tools">
<h2>Setting up visualisation tools<a class="headerlink" href="#setting-up-visualisation-tools" title="Permalink to this headline">¶</a></h2>
<p>To visualise DPD trajectories, you can either install <a class="reference external" href="http://www.ks.uiuc.edu/Research/vmd/">VMD</a> or <a class="reference external" href="http://www.ovito.org">OVITO</a> <a class="footnote-reference brackets" href="#id6" id="id3">2</a>. Visualising LBE results and some DPD analyses (based on grids) can be carried out using <a class="reference external" href="https://www.paraview.org">Paraview</a>. You will also need a program to plot tabulated data supplied in text files (e.g. Gnuplot, Excel), although one of the supplied Python scripts (see below) can also do this for DPD calculations.</p>
</section>
<section id="optional-python-scripts">
<h2>Optional Python scripts<a class="headerlink" href="#optional-python-scripts" title="Permalink to this headline">¶</a></h2>
<p>Some Python3 scripts are available to carry out a simple DPD simulation workflow for one of the practical exercises, set up boundary conditions for one of the LBE exercises (as an alternative to using the DL_MESO GUI), and plot graphs of simulation outputs. These scripts are optional but very useful and come highly recommended.</p>
<p>As well as Python3, the following packages need to be installed using PIP (Python’s Package Installer) <a class="footnote-reference brackets" href="#id7" id="id4">3</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">docopt</span> <span class="n">tqdm</span> <span class="n">numpy</span> <span class="n">PyQt6</span> <span class="n">matplotlib</span> <span class="n">scipy</span> <span class="n">scikit</span><span class="o">-</span><span class="n">image</span> <span class="n">vtk</span>
</pre></div>
</div>
<p>The visualisation scripts will also need <a class="reference external" href="https://doc.qt.io/qt-6/gettingstarted.html">Qt6</a> to be installed, e.g. <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">qt6-default</span></code> in Ubuntu.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>The command shown here is standard for g++ with Open-MPI or MPICH-2, although it may vary for other compilers (e.g. Intel) and/or MPI implementations.</p>
</dd>
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>At the time of writing (September 2021), only OVITO is currently available as a stable release for Macs since the removal of 32-bit application support in macOS. There are test builds available for macOS Catalina (10.15) and Big Sur (11) of <a class="reference external" href="https://www.ks.uiuc.edu/Research/vmd/alpha/">alpha releases of VMD 1.9.4</a>, but these are not guaranteed to work: download and install them <em>at your own risk</em>!</p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>Depending on your installation of Python3 and PIP, you might need to use <code class="docutils literal notranslate"><span class="pre">pip3</span></code> instead of <code class="docutils literal notranslate"><span class="pre">pip</span></code> in this command to install the packages.</p>
</dd>
</dl>
<p class="rubric">Reference</p>
<dl class="citation">
<dt class="label" id="seaton2013"><span class="brackets"><a class="fn-backref" href="#id1">Seaton2013</a></span></dt>
<dd><p>MA Seaton, RL Anderson, S Metz and W Smith, DL_MESO: highly scalable mesoscale simulations, <em>Molecular Simulation</em>, <strong>39</strong>, p. 796-821, 2013, doi: 10.1080/08927022.2013.772297.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../RST_PAGES/Introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Resources.html">Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../manual.html">DL_Software Manuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html">DL_Software General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TUTORIALS/tutorials.html">DL_Software Reference Guides</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Exercises.html">DL_Software Tutorial Exercises</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="exercises_dlpoly.html">DL_POLY</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercises_dlfield.html">DL_FIELD</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercises_data.html">D_ATA</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="exercises_dlmeso.html">DL_MESO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../DEMOCRITUS/Democritus.html">Democritus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../video_links.html">Video Material</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualisation.html">Model Building and Visualization Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text_editors.html">Text Editors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux_cheat_sheet.html">Linux Cheat Sheet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../SIMULATIONS/Simulations.html">Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge.html">Knowledge Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../RST_PAGES/Acknowledgements.html">Acknowledgements</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="exercises_dlmeso.html"
                        title="previous chapter">DL_MESO</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="LBE.html"
                        title="next chapter">Lattice Boltzmann Equation</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="LBE.html" title="Lattice Boltzmann Equation"
             >next</a> |</li>
        <li class="right" >
          <a href="exercises_dlmeso.html" title="DL_MESO"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">DL_Software Digital Guide (DL_SDG) 2.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../Resources.html" >Resources</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="Exercises.html" >DL_Software Tutorial Exercises</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="exercises_dlmeso.html" >DL_MESO</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Setting up DL_MESO</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, DL_SDG.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>